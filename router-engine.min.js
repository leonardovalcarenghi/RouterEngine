(function(t,o){t.RouterEngine=o()})(this,function(){function t(){return s=[],this}var o,e,n,s=[{hash:"",callBack:null,root:!1}],i=!1,a=!1;return t.prototype.GetRoutes=function(){return s},t.prototype.OnChange=function(t){return n="function"==typeof t?t:null,this},t.prototype.NotFound=function(t){return e="function"==typeof t?t:null,this},t.prototype.SetRenderEngine=function(t){return o=t,this},t.prototype.SetRoot=function(t){if(a)throw"[SetRoot] Não é possível adicionar mais de uma rota como root.";return a=!0,s.push({root:!0,hash:"/",callBack:t}),this},t.prototype.Add=function(t,o){if("string"==typeof t){let e=this._trimSlashes(t);if(e=""==e?"/":e,this._routeExists(e))throw"[Add] Não é possível adicionar hashs repetidas para mapeamento.";s.push({hash:e,callBack:o})}else{if(t.hash=this._trimSlashes(t.hash),t.hash=""==t.hash?"/":t.hash,this._routeExists(t.hash))throw"[Add] Não é possível adicionar hashs repetidas para mapeamento.";if(t.root){if(a)throw"[Add] Não é possível adicionar mais de uma rota como root.";a=!0}s.push(t.callBack?{...t}:{...t,callBack:o})}return this},t.prototype.Remove=function(t){t=this._trimSlashes(t);const o=s.find(o=>o.hash==t),e=s.indexOf(o);e&&(o.root&&(a=!1),s.splice(e,1))},t.prototype.SetListener=function(t,o){if(t=this._trimSlashes(t),!this._routeExists(t))throw"[SetListener] Não foi encontrado nenhuma rota mapeada usando essa hash.";const e=s.find(o=>o.hash==t);return e.callBack=o,this},t.prototype.SetTitle=function(t,o){if(t=this._trimSlashes(t),!this._routeExists(t))throw"[SetTitle] Não foi encontrado nenhuma rota mapeada usando essa hash.";const e=s.find(o=>o.hash==t);return e.title=o||"",this},t.prototype.NavigateTo=function(t){if(t=this._trimSlashes(t),!this._routeExists(t))throw"[NavigateTo] Não foi encontrado nenhuma rota mapeada usando essa hash.";return window.location.hash=path,this},t.prototype.Start=function(){if(!i)return i=!0,this._routingMonitoring(),window.onhashchange=(t=>{this._routingMonitoring()}),this;console.warn("Roteamento já foi iniciado.")},t.prototype.Stop=function(){if(i)return i=!1,window.onhashchange=null,this;console.warn("Roteamento está parado.")},t.prototype._routingMonitoring=async function(){const t=this._getHash(),o=this._routeExists(t);"/"!=t&!o?"function"==typeof e&&e():("/"!=t||a||console.warn("Não foi definido um root para o roteamento."),this._setTitle(t),this._callOnChangeCallback(t),await this._renderPage(t),this._callCallback(t))},t.prototype._getHash=function(){let t=window.location.hash.substr(1).replace(/(\?.*)$/,"");return""==t&&(t="/"),t},t.prototype._getRoute=function(t){const o=s.find(o=>o.hash==t);return o||null},t.prototype._renderPage=async function(t){const e=this._getRoute(t);o&&e.path&&await o.Page(e.path)},t.prototype._callCallback=function(t){t=this._trimSlashes(t);const o=this._getRoute(t);o&&"function"==typeof o.callBack&&o.callBack()},t.prototype._callOnChangeCallback=function(t){const o=this._getRoute(t),e=this._getUrlParams(),s={...o,hash:t,parameters:e};n&&n(s)},t.prototype._getUrlParams=function(){let t=window.location.href,o=t.indexOf("?");if(-1==o)return null;t=t.substr(o+1,t.length);let e=t.split("&");var n={};return e.forEach(t=>{const o=t.split("=")[0],e=t.split("=")[1];n[o]=e}),n},t.prototype._setTitle=function(t){t=this._trimSlashes(t);const o=this._getRoute(t);if(o){const t=o.title;document.getElementsByTagName("title")[0].innerHTML=t||""}},t.prototype._trimSlashes=function(t){return"string"!=typeof t?"":(t=t.toString().replace(/\/$/,"").replace(/^\//,""),""==t?"/":t)},t.prototype._routeExists=function(t){const o=this._getRoute(t);return!!o},t.prototype._get=function(t){return new Promise((o,e)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.send(null),n.onload=(()=>{404==n.status?e(null):o(n.responseText)}),n.onerror=(()=>{e(null)})})},t});