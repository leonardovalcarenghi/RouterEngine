(function(t,o){t.RouterEngine=o()})(this,function(){function t(){return n=[],this}var o,e,a,n=[{hash:"",callBack:null,root:!1}],r=!1,i=!1;return Object.defineProperty(t.prototype,"NotFound",{set:function(t){e="function"==typeof t?t:null}}),Object.defineProperty(t.prototype,"OnChange",{set:function(t){a="function"==typeof t?t:null}}),Object.defineProperty(t.prototype,"Root",{set:function(t){if(i)throw"[SetRoot] Não é possível adicionar mais de uma rota como root.";return i=!0,n.push({root:!0,hash:"/",callBack:t}),this}}),t.prototype.GetRoutes=function(){return n},t.prototype.SetRenderEngine=function(t){return o=t,this},t.prototype.SetRoot=function(t){if(i)throw"[SetRoot] Não é possível adicionar mais de uma rota para o root.";if(null==t)throw"[SetRoot] Não é possível atribuir 'null' como callBack do Root.";if(null==t)throw"[SetRoot] Não é possível atribuir 'undefined' como callBack do Root.";if("function"!=typeof t)throw"[SetRoot] Somente funções podem serem atribuidas como callBack para o Root.";return i=!0,n.push({root:!0,hash:"/",callBack:t}),this},t.prototype.Add=function(t,o){if("string"==typeof t){let e=this._trimSlashes(t);if(!e)throw"[Add] Informe qual 'hash' você quer adicionar no mapeamento.";if(e=""==e?"/":e,this._routeExists(e))throw"[Add] Não é possível adicionar hashs repetidas para mapeamento.";n.push({hash:e,callBack:o})}else{if(!t)throw"[Add] Objeto inválido.";if(t.hash=this._trimSlashes(t.hash),!t.hash)throw"[Add] Informe qual 'hash' você quer adicionar no mapeamento.";if(t.hash=""==t.hash?"/":t.hash,this._routeExists(t.hash))throw"[Add] Não é possível adicionar hashs repetidas para mapeamento.";if(t.root){if(i)throw"[Add] Não é possível adicionar mais de uma rota como root.";i=!0}n.push(t.callBack?{...t}:{...t,callBack:o})}return this},t.prototype.Remove=function(t){if(t=this._trimSlashes(t),!t)throw"[Remove] Informe qual 'hash' você quer remover do mapeamento.";if(!this._routeExists(t))throw"[Remove] Não foi encontrado nenhuma rota mapeada usando essa hash.";const o=n.find(o=>o.hash==t),e=n.indexOf(o);return e&&(o.root&&(i=!1),n.splice(e,1)),this},t.prototype.SetListener=function(t,o){if(t=this._trimSlashes(t),!t)throw"[SetListener] Informe para qual 'hash' você quer definir o callBack.";if(!this._routeExists(t))throw"[SetListener] Não foi encontrado nenhuma rota mapeada usando essa hash.";if(null==o)throw"[SetListener] Não é possível atribuir 'null' como callBack da rota.";if(null==o)throw"[SetListener] Não é possível atribuir 'undefined' como callBack da rota.";if("function"!=typeof o)throw"[SetListener] Somente funções podem serem atribuidas como callBack para as rotas.";const e=n.find(o=>o.hash==t);return e.callBack=o,this},t.prototype.RemoveListener=function(t){if(!t)throw"[RemoveListener] Informe para qual 'hash' você quer remover o callBack.";if(t=this._trimSlashes(t),!this._routeExists(t))throw"[RemoveListener] Não foi encontrado nenhuma rota mapeada usando essa hash.";const o=n.find(o=>o.hash==t);return o.callBack=null,this},t.prototype.SetTitle=function(t,o){if(t=this._trimSlashes(t),!t)throw"[SetTitle] Informe para qual 'hash' você quer definir o título.";if(!this._routeExists(t))throw"[SetTitle] Não foi encontrado nenhuma rota mapeada usando essa hash.";const e=n.find(o=>o.hash==t);return e.title=o||"",this},t.prototype.NavigateTo=function(t){if(t=this._trimSlashes(t),!t)throw"[NavigateTo] Informe para qual 'hash' você quer redirecionar o usuário.";if(!this._routeExists(t))throw"[NavigateTo] Não foi encontrado nenhuma rota mapeada usando essa hash.";return window.location.hash=path,this},t.prototype.Start=function(){if(!r)return r=!0,this._routingMonitoring(),window.onhashchange=(t=>{this._routingMonitoring()}),this;console.warn("Roteamento já foi iniciado.")},t.prototype.Stop=function(){if(r)return r=!1,window.onhashchange=null,this;console.warn("Roteamento está parado.")},t.prototype._routingMonitoring=async function(){const t=this._getHash(),e=this._routeExists(t);"/"!=t&!e?this._callNotFoundCallback(t):("/"!=t||i||console.warn("Não foi definido um root para o roteamento."),this._setTitle(t),this._callOnChangeCallBack(t),o&&await this._renderPage(t),this._callCallback(t))},t.prototype._getHash=function(){let t=window.location.hash.substr(1).replace(/(\?.*)$/,"");return""==t&&(t="/"),t},t.prototype._getRoute=function(t){const o=n.find(o=>o.hash==t);return o||null},t.prototype._renderPage=async function(t){const e=this._getRoute(t);o&&e.path&&await o.Page(e.path)},t.prototype._callCallback=function(t){const o=this._getRoute(t),e=this._getUrlParams(),a={...o,hash:t,parameters:e};"function"==typeof o.callBack&&o.callBack(a)},t.prototype._callNotFoundCallback=function(t){const o=this._getUrlParams(),a={hash:t,parameters:o};"function"==typeof e&&e(a)},t.prototype._callOnChangeCallBack=function(t){const o=this._getRoute(t),e=this._getUrlParams(),n={...o,hash:t,parameters:e};a&&a(n)},t.prototype._getUrlParams=function(){let t=window.location.href,o=t.indexOf("?");if(-1==o)return null;t=t.substr(o+1,t.length);let e=t.split("&");var a={};return e.forEach(t=>{const o=t.split("=")[0],e=t.split("=")[1];a[o]=e}),a},t.prototype._setTitle=function(t){t=this._trimSlashes(t);const o=this._getRoute(t);if(o){const t=o.title;document.getElementsByTagName("title")[0].innerHTML=t||""}},t.prototype._trimSlashes=function(t){return"string"!=typeof t?"":(t=t.toString().replace(/\/$/,"").replace(/^\//,""),""==t?"/":t)},t.prototype._routeExists=function(t){const o=this._getRoute(t);return!!o},t.prototype._get=function(t){return new Promise((o,e)=>{const a=new XMLHttpRequest;a.open("GET",t,!0),a.send(null),a.onload=(()=>{404==a.status?e(null):o(a.responseText)}),a.onerror=(()=>{e(null)})})},t});